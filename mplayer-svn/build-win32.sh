#!/bin/bash
OPENSSL_ROOT=${HOME}/src/openssl
./configure \
    --enable-openssl-nondistributable --enable-runtime-cpudetection --enable-static \
    --extra-cflags="-Os -I${OPENSSL_ROOT}/include" \
    --extra-ldflags="-L${OPENSSL_ROOT}/lib -lssl -lcrypto" \
    --windres=i686-w64-mingw32-windres \
    --disable-iconv --disable-mencoder \
    \
    --disable-vidix --disable-vidix-pcidb --disable-matrixview --disable-xss \
    --disable-tga --disable-pnm --disable-md5sum --disable-yuv4mpeg \
    --disable-quartz \
    \
    --disable-vcd --disable-bluray --disable-dvdnav --disable-dvdread \
    \
    --disable-alsa --disable-ossaudio --disable-arts --disable-esd \
    --disable-pulse --disable-jack --disable-openal --disable-nas \
    --disable-sgiaudio --disable-sunaudio --disable-kai --disable-dart \
    --disable-win32waveout --disable-select \
    \
    \
    --disable-win32dll \
    \
    --disable-decoder=aasc \
    --disable-decoder=amv \
    --disable-decoder=anm \
    --disable-decoder=ansi \
    --disable-decoder=asv1 \
    --disable-decoder=asv2 \
    --disable-decoder=aura \
    --disable-decoder=aura2 \
    --disable-decoder=avrp \
    --disable-decoder=avs \
    --disable-decoder=avui \
    --disable-decoder=ayuv \
    --disable-decoder=bethsoftvid \
    --disable-decoder=bfi \
    --disable-decoder=bink \
    --disable-decoder=bmp \
    --disable-decoder=bmv_video \
    --disable-decoder=c93 \
    --disable-decoder=cavs \
    --disable-decoder=cdgraphics \
    --disable-decoder=cdxl \
    --disable-decoder=cinepak \
    --disable-decoder=cljr \
    --disable-decoder=cscd \
    --disable-decoder=cyuv \
    --disable-decoder=dfa \
    --disable-decoder=dirac \
    --disable-decoder=dnxhd \
    --disable-decoder=dpx \
    --disable-decoder=dsicinvideo \
    --disable-decoder=dvvideo \
    --disable-decoder=dxa \
    --disable-decoder=dxtory \
    --disable-decoder=eacmv \
    --disable-decoder=eamad \
    --disable-decoder=eatgq \
    --disable-decoder=eatgv \
    --disable-decoder=eatqi \
    --disable-decoder=eightbps \
    --disable-decoder=eightsvx_exp \
    --disable-decoder=eightsvx_fib \
    --disable-decoder=escape124 \
    --disable-decoder=escape130 \
    --disable-decoder=exr \
    --disable-decoder=ffv1 \
    --disable-decoder=ffvhuff \
    --disable-decoder=flashsv \
    --disable-decoder=flashsv2 \
    --disable-decoder=flic \
    --disable-decoder=fourxm \
    --disable-decoder=fraps \
    --disable-decoder=frwu \
    --disable-decoder=gif \
    --disable-decoder=h261 \
    --disable-decoder=h264_crystalhd \
    --disable-decoder=h264_vdpau \
    --disable-decoder=h264_cuvid \
    --disable-decoder=h264_mediacodec \
    --disable-decoder=h264_mmal \
    --disable-decoder=h264_qsv \
    --disable-decoder=h264_vda \
    --disable-decoder=h264_vdpau \
    --disable-decoder=huffyuv \
    --disable-decoder=idcin \
    --disable-decoder=iff_byterun1 \
    --disable-decoder=iff_ilbm \
    --disable-decoder=indeo2 \
    --disable-decoder=indeo3 \
    --disable-decoder=indeo4 \
    --disable-decoder=indeo5 \
    --disable-decoder=interplay_video \
    --disable-decoder=jpeg2000 \
    --disable-decoder=jpegls \
    --disable-decoder=jv \
    --disable-decoder=kgv1 \
    --disable-decoder=kmvc \
    --disable-decoder=lagarith \
    --disable-decoder=loco \
    --disable-decoder=mdec \
    --disable-decoder=mimic \
    --disable-decoder=mjpeg \
    --disable-decoder=mjpegb \
    --disable-decoder=mmvideo \
    --disable-decoder=motionpixels \
    --disable-decoder=mpeg_xvmc \
    --disable-decoder=mpeg4_crystalhd \
    --disable-decoder=mpeg4_vdpau \
    --disable-decoder=mpegvideo \
    --disable-decoder=mpeg_vdpau \
    --disable-decoder=mpeg1_vdpau \
    --disable-decoder=mpeg2_crystalhd \
    --disable-decoder=msmpeg4_crystalhd \
    --disable-decoder=msmpeg4v1 \
    --disable-decoder=msmpeg4v2 \
    --disable-decoder=msmpeg4v3 \
    --disable-decoder=msrle \
    --disable-decoder=msvideo1 \
    --disable-decoder=mszh \
    --disable-decoder=mxpeg \
    --disable-decoder=nuv \
    --disable-decoder=pam \
    --disable-decoder=pbm \
    --disable-decoder=pcx \
    --disable-decoder=pgm \
    --disable-decoder=pgmyuv \
    --disable-decoder=pictor \
    --disable-decoder=png \
    --disable-decoder=ppm \
    --disable-decoder=prores \
    --disable-decoder=prores_lgpl \
    --disable-decoder=ptx \
    --disable-decoder=qdraw \
    --disable-decoder=qpeg \
    --disable-decoder=qtrle \
    --disable-decoder=r10k \
    --disable-decoder=r210 \
    --disable-decoder=rawvideo \
    --disable-decoder=rl2 \
    --disable-decoder=roq \
    --disable-decoder=rpza \
    --disable-decoder=rv10 \
    --disable-decoder=rv20 \
    --disable-decoder=rv30 \
    --disable-decoder=rv40 \
    --disable-decoder=s302m \
    --disable-decoder=sgi \
    --disable-decoder=smacker \
    --disable-decoder=smc \
    --disable-decoder=snow \
    --disable-decoder=sp5x \
    --disable-decoder=sunrast \
    --disable-decoder=targa \
    --disable-decoder=theora \
    --disable-decoder=thp \
    --disable-decoder=tiertexseqvideo \
    --disable-decoder=tiff \
    --disable-decoder=tmv \
    --disable-decoder=truemotion1 \
    --disable-decoder=truemotion2 \
    --disable-decoder=tscc \
    --disable-decoder=txd \
    --disable-decoder=ulti \
    --disable-decoder=utvideo \
    --disable-decoder=v210 \
    --disable-decoder=v210x \
    --disable-decoder=v308 \
    --disable-decoder=v408 \
    --disable-decoder=v410 \
    --disable-decoder=vb \
    --disable-decoder=vble \
    --disable-decoder=vcr1 \
    --disable-decoder=vmdvideo \
    --disable-decoder=vmnc \
    --disable-decoder=vp3 \
    --disable-decoder=vp5 \
    --disable-decoder=vp6a \
    --disable-decoder=vp6f \
    --disable-decoder=vp7 \
    --disable-decoder=vp8_cuvid \
    --disable-decoder=vp9_cuvid \
    --disable-decoder=libvpx_vp8 \
    --disable-decoder=libvpx_vp9 \
    --disable-decoder=vqa \
    --disable-decoder=wmv3 \
    --disable-decoder=wmv3_crystalhd \
    --disable-decoder=wmv3_vdpau \
    --disable-decoder=wmv3image \
    --disable-decoder=wnv1 \
    --disable-decoder=xan_wc3 \
    --disable-decoder=xan_wc4 \
    --disable-decoder=xbm \
    --disable-decoder=xl \
    --disable-decoder=xwd \
    --disable-decoder=y41p \
    --disable-decoder=yop \
    --disable-decoder=yuv4 \
    --disable-decoder=zerocodec \
    --disable-decoder=zlib \
    --disable-decoder=zmbv \
    --disable-decoder=aac_latm \
    --disable-decoder=alac \
    --disable-decoder=als \
    --disable-decoder=amrnb \
    --disable-decoder=amrwb \
    --disable-decoder=ape \
    --disable-decoder=atrac1 \
    --disable-decoder=atrac3 \
    --disable-decoder=binkaudio_dct \
    --disable-decoder=binkaudio_rdft \
    --disable-decoder=bmv_audio \
    --disable-decoder=cook \
    --disable-decoder=dca \
    --disable-decoder=dsicinaudio \
    --disable-decoder=eac3 \
    --disable-decoder=ffwavesynth \
    --disable-decoder=g723_1 \
    --disable-decoder=g729 \
    --disable-decoder=gsm \
    --disable-decoder=gsm_ms \
    --disable-decoder=mace3 \
    --disable-decoder=mace6 \
    --disable-decoder=mlp \
    --disable-decoder=mp1 \
    --disable-decoder=mp1float \
    --disable-decoder=mp2float \
    --disable-decoder=mp3float \
    --disable-decoder=mp3adu \
    --disable-decoder=mp3adufloat \
    --disable-decoder=mp3on4 \
    --disable-decoder=mp3on4float \
    --disable-decoder=mpc7 \
    --disable-decoder=mpc8 \
    --disable-decoder=nellymoser \
    --disable-decoder=qcelp \
    --disable-decoder=qdm2 \
    --disable-decoder=ra_144 \
    --disable-decoder=ra_288 \
    --disable-decoder=ralf \
    --disable-decoder=shorten \
    --disable-decoder=sipr \
    --disable-decoder=smackaud \
    --disable-decoder=sonic \
    --disable-decoder=truehd \
    --disable-decoder=truespeech \
    --disable-decoder=tta \
    --disable-decoder=twinvq \
    --disable-decoder=vmdaudio \
    --disable-decoder=wavpack \
    --disable-decoder=wmalossless \
    --disable-decoder=wmapro \
    --disable-decoder=wmavoice \
    --disable-decoder=ws_snd1 \
    --disable-decoder=pcm_alaw \
    --disable-decoder=pcm_bluray \
    --disable-decoder=pcm_dvd \
    --disable-decoder=pcm_f32be \
    --disable-decoder=pcm_f32le \
    --disable-decoder=pcm_f64be \
    --disable-decoder=pcm_f64le \
    --disable-decoder=pcm_lxf \
    --disable-decoder=pcm_mulaw \
    --disable-decoder=pcm_s8 \
    --disable-decoder=pcm_s8_planar \
    --disable-decoder=pcm_s16be \
    --disable-decoder=pcm_s16le \
    --disable-decoder=pcm_s16le_planar \
    --disable-decoder=pcm_s24be \
    --disable-decoder=pcm_s24daud \
    --disable-decoder=pcm_s24le \
    --disable-decoder=pcm_s32be \
    --disable-decoder=pcm_s32le \
    --disable-decoder=pcm_u8 \
    --disable-decoder=pcm_u16be \
    --disable-decoder=pcm_u16le \
    --disable-decoder=pcm_u24be \
    --disable-decoder=pcm_u24le \
    --disable-decoder=pcm_u32be \
    --disable-decoder=pcm_u32le \
    --disable-decoder=pcm_zork \
    --disable-decoder=interplay_dpcm \
    --disable-decoder=roq_dpcm \
    --disable-decoder=sol_dpcm \
    --disable-decoder=xan_dpcm \
    --disable-decoder=adpcm_4xm \
    --disable-decoder=adpcm_adx \
    --disable-decoder=adpcm_ct \
    --disable-decoder=adpcm_ea \
    --disable-decoder=adpcm_ea_maxis_xa \
    --disable-decoder=adpcm_ea_r1 \
    --disable-decoder=adpcm_ea_r2 \
    --disable-decoder=adpcm_ea_r3 \
    --disable-decoder=adpcm_ea_xas \
    --disable-decoder=adpcm_g722 \
    --disable-decoder=adpcm_ima_amv \
    --disable-decoder=adpcm_ima_apc \
    --disable-decoder=adpcm_ima_dk3 \
    --disable-decoder=adpcm_ima_dk4 \
    --disable-decoder=adpcm_ima_ea_eacs \
    --disable-decoder=adpcm_ima_ea_sead \
    --disable-decoder=adpcm_ima_iss \
    --disable-decoder=adpcm_ima_qt \
    --disable-decoder=adpcm_ima_smjpeg \
    --disable-decoder=adpcm_ima_wav \
    --disable-decoder=adpcm_ima_ws \
    --disable-decoder=adpcm_ms \
    --disable-decoder=adpcm_sbpro_2 \
    --disable-decoder=adpcm_sbpro_3 \
    --disable-decoder=adpcm_sbpro_4 \
    --disable-decoder=adpcm_swf \
    --disable-decoder=adpcm_thp \
    --disable-decoder=adpcm_xa \
    --disable-decoder=adpcm_yamaha \
    --disable-decoder=ass \
    --disable-decoder=dvbsub \
    --disable-decoder=dvdsub \
    --disable-decoder=jacosub \
    --disable-decoder=microdvd \
    --disable-decoder=pgssub \
    --disable-decoder=srt \
    --disable-decoder=xsub \
    --disable-decoder=libcelt \
    --disable-decoder=libgsm \
    --disable-decoder=libgsm_ms \
    --disable-decoder=libopencore_amrnb \
    --disable-decoder=libopencore_amrwb \
    --disable-decoder=libopenjpeg \
    --disable-decoder=libschroedinger \
    --disable-decoder=libspeex \
    --disable-decoder=libstagefright_h264 \
    --disable-decoder=libutvideo \
    --disable-decoder=libvorbis \
    --disable-decoder=libvpx \
    --disable-decoder=bintext \
    --disable-decoder=xbin \
    --disable-decoder=idf \
    --enable-decoder=flv \
    --enable-decoder=h263 \
    --enable-decoder=h263i \
    --enable-decoder=h264 \
    --enable-decoder=hevc \
    --enable-decoder=mpeg1video \
    --enable-decoder=mpeg2video \
    --enable-decoder=mpeg4 \
    --enable-decoder=svq1 \
    --enable-decoder=svq3 \
    --enable-decoder=vp6 \
    --enable-decoder=vp8 \
    --enable-decoder=vp9 \
    --enable-decoder=wmv1 \
    --enable-decoder=wmv2 \
    --enable-decoder=aac \
    --enable-decoder=ac3 \
    --enable-decoder=flac \
    --enable-decoder=mp2 \
    --enable-decoder=mp3 \
    --enable-decoder=vorbis \
    --enable-decoder=wmav1 \
    --enable-decoder=wmav2 \
    --enable-decoder=adpcm_g726 \
    --disable-encoder=a64multi \
    --disable-encoder=a64multi5 \
    --disable-encoder=amv \
    --disable-encoder=asv1 \
    --disable-encoder=asv2 \
    --disable-encoder=avrp \
    --disable-encoder=avui \
    --disable-encoder=ayuv \
    --disable-encoder=bmp \
    --disable-encoder=cljr \
    --disable-encoder=dnxhd \
    --disable-encoder=dpx \
    --disable-encoder=dvvideo \
    --disable-encoder=ffv1 \
    --disable-encoder=ffvhuff \
    --disable-encoder=flashsv \
    --disable-encoder=flashsv2 \
    --disable-encoder=flv \
    --disable-encoder=gif \
    --disable-encoder=h261 \
    --disable-encoder=h263 \
    --disable-encoder=h263p \
    --disable-encoder=huffyuv \
    --disable-encoder=jpeg2000 \
    --disable-encoder=jpegls \
    --disable-encoder=ljpeg \
    --disable-encoder=mjpeg \
    --disable-encoder=mpeg1video \
    --disable-encoder=mpeg2video \
    --disable-encoder=mpeg4 \
    --disable-encoder=msmpeg4v2 \
    --disable-encoder=msmpeg4v3 \
    --disable-encoder=msvideo1 \
    --disable-encoder=pam \
    --disable-encoder=pbm \
    --disable-encoder=pcx \
    --disable-encoder=pgm \
    --disable-encoder=pgmyuv \
    --disable-encoder=png \
    --disable-encoder=ppm \
    --disable-encoder=prores \
    --disable-encoder=prores_anatoliy \
    --disable-encoder=prores_kostya \
    --disable-encoder=qtrle \
    --disable-encoder=r10k \
    --disable-encoder=r210 \
    --disable-encoder=rawvideo \
    --disable-encoder=roq \
    --disable-encoder=rv10 \
    --disable-encoder=rv20 \
    --disable-encoder=sgi \
    --disable-encoder=snow \
    --disable-encoder=sunrast \
    --disable-encoder=svq1 \
    --disable-encoder=targa \
    --disable-encoder=tiff \
    --disable-encoder=v210 \
    --disable-encoder=v308 \
    --disable-encoder=v408 \
    --disable-encoder=v410 \
    --disable-encoder=wmv1 \
    --disable-encoder=wmv2 \
    --disable-encoder=xbm \
    --disable-encoder=xwd \
    --disable-encoder=y41p \
    --disable-encoder=yuv4 \
    --disable-encoder=zlib \
    --disable-encoder=zmbv \
    --disable-encoder=aac \
    --disable-encoder=ac3 \
    --disable-encoder=ac3_fixed \
    --disable-encoder=alac \
    --disable-encoder=dca \
    --disable-encoder=eac3 \
    --disable-encoder=flac \
    --disable-encoder=g723_1 \
    --disable-encoder=mp2 \
    --disable-encoder=nellymoser \
    --disable-encoder=ra_144 \
    --disable-encoder=sonic \
    --disable-encoder=sonic_ls \
    --disable-encoder=vorbis \
    --disable-encoder=wmav1 \
    --disable-encoder=wmav2 \
    --disable-encoder=pcm_alaw \
    --disable-encoder=pcm_f32be \
    --disable-encoder=pcm_f32le \
    --disable-encoder=pcm_f64be \
    --disable-encoder=pcm_f64le \
    --disable-encoder=pcm_mulaw \
    --disable-encoder=pcm_s8 \
    --disable-encoder=pcm_s16be \
    --disable-encoder=pcm_s16le \
    --disable-encoder=pcm_s24be \
    --disable-encoder=pcm_s24daud \
    --disable-encoder=pcm_s24le \
    --disable-encoder=pcm_s32be \
    --disable-encoder=pcm_s32le \
    --disable-encoder=pcm_u8 \
    --disable-encoder=pcm_u16be \
    --disable-encoder=pcm_u16le \
    --disable-encoder=pcm_u24be \
    --disable-encoder=pcm_u24le \
    --disable-encoder=pcm_u32be \
    --disable-encoder=pcm_u32le \
    --disable-encoder=roq_dpcm \
    --disable-encoder=adpcm_adx \
    --disable-encoder=adpcm_g722 \
    --disable-encoder=adpcm_g726 \
    --disable-encoder=adpcm_ima_qt \
    --disable-encoder=adpcm_ima_wav \
    --disable-encoder=adpcm_ms \
    --disable-encoder=adpcm_swf \
    --disable-encoder=adpcm_yamaha \
    --disable-encoder=ass \
    --disable-encoder=dvbsub \
    --disable-encoder=dvdsub \
    --disable-encoder=srt \
    --disable-encoder=xsub \
    --disable-encoder=libfaac \
    --disable-encoder=libgsm \
    --disable-encoder=libgsm_ms \
    --disable-encoder=libmp3lame \
    --disable-encoder=libopencore_amrnb \
    --disable-encoder=libopenjpeg \
    --disable-encoder=libschroedinger \
    --disable-encoder=libspeex \
    --disable-encoder=libtheora \
    --disable-encoder=libutvideo \
    --disable-encoder=libvo_aacenc \
    --disable-encoder=libvo_amrwbenc \
    --disable-encoder=libvorbis \
    --disable-encoder=libvpx \
    --disable-encoder=libvpx_vp8 \
    --disable-encoder=libvpx_vp9 \
    --disable-encoder=libx264 \
    --disable-encoder=libx264rgb \
    --disable-encoder=libxavs \
    --disable-encoder=libxvid \
    --disable-encoder=libaacplus \
    --disable-encoder=libopenh264 \
    --disable-encoder=nvenc \
    --disable-encoder=nvenc_h264 \
    --disable-encoder=nvenc_hevc \
    --disable-encoder=h264_nvenc \
    --disable-encoder=h264_omx \
    --disable-encoder=h264_qsv \
    --disable-encoder=h264_vaapi \
    --disable-encoder=h264_videotoolbox \
    --disable-encoder=hevc_nvenc \
    --disable-encoder=hevc_qsv \
    --disable-encoder=hevc_vaapi \
\
\


make
echo Before Stripping
ls -lh mplayer.exe
i686-w64-mingw32-strip -s mplayer.exe
echo After Stripping, Before UPX
ls -lh mplayer.exe
rm -rf mplayer-upx.exe
upx -9 -o mplayer-upx.exe mplayer.exe
echo After UPX
ls -lh mplayer-upx.exe
